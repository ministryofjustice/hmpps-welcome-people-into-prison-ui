{% extends "../partials/layout.njk" %}

{% set pageTitle = "What is the reason for imprisonment?" %}
{% set errorMessageText = errors[0].text %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

            {% if errors.length %}
                {{ govukErrorSummary({
                    titleText: "There is a problem",
                    errorList: errors,
                    attributes: { 'data-qa-errors': true }
                }) }}
            {% endif %}

            <span class="govuk-caption-xl">  Confirm arrival of {{ data.firstName}} {{ data.lastName }}</span>

            <form method="post" action = "/prisoners/{{ data.id }}/imprisonment-status">
                <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
                    <div class="govuk-form-group {%- if errorMessageText %} govuk-form-group--error {% endif %}">
                        <fieldset class="govuk-fieldset" aria-describedby="What is the reason for imprisonment">
                            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                                <h1 class="govuk-fieldset__heading"> What is the reason for imprisonment?</h1>
                            </legend>

                            {% if errorMessageText %}
                                <span class="govuk-error-message">
                                    <span class="govuk-visually-hidden">Error:</span>{{ errorMessageText }}
                                </span>
                            {% endif %}

                            <div class="govuk-radios">
                            {% for status in imprisonmentStatuses %}
                                <div class="govuk-radios__item">
                                    <input class="govuk-radios__input" id="imprisonment-status-{{loop.index}}" name="imprisonmentStatus" type="radio" value="{{status.description}}" data-qa="imprisonment-status-{{loop.index}}">
                                    <label class="govuk-label govuk-radios__label" for="imprisonment-status-{{loop.index}}">
                                        {{status.description}}
                                    </label>
                                </div>
                            {% endfor %}
                            </div>
                        </fieldset>
                    </div>
                    {{ govukButton({
                        classes: "govuk-button govuk-!-margin-bottom-3",
                        text: "Continue",
                        attributes: {'data-qa': 'continue'},
                        type: 'submit'
                    }) }}
            </form>
         </div>
    </div>
{% endblock %}
